{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getPhotos(query, page, pageSize) {\n  const API_KEY = '43339285-ea15b1a3e45dc18314900d076';\n  const url = 'https://pixabay.com/api/';\n\n  // const params = new URLSearchParams({\n  //   key: API_KEY,\n  //   q: query,\n  //   orientation: 'horizontal',\n  //   image_type: 'photo',\n  //   safesearch: true,\n  //   page,\n  //   per_page: 15,\n  // });\n\n  const params = {\n    key: API_KEY,\n    q: query,\n    orientation: 'horizontal',\n    image_type: 'photo',\n    safesearch: true,\n    page,\n    per_page: pageSize,\n  };\n\n  try {\n    const response = await axios.get(url, {\n      params,\n    });\n    return response.data;\n  } catch (error) {\n    throw new Error(error.response.status);\n  }\n};\n","const craeteImageMarkup = image => {\n  return `<li class=\"gallery-item\">\n    <a href=\"${image.largeImageURL}\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" title=\"${image.tags}\">\n    </a>\n    <div class=\"image-details\">\n      <ul>\n       <li>\n         <h3>Likes:</h3>\n         <p>${image.likes}</p>\n       </li>\n       <li>\n         <h3>Views:</h3>\n         <p>${image.views}</p>\n       </li>  \n       <li>\n         <h3>Comments:</h3>\n         <p>${image.comments}</p>\n       </li>  \n       <li>\n         <h3>Downloads:</h3>\n         <p>${image.downloads}</p>\n       </li>\n      </ul>\n    </div>\n  </li>`;\n};\n\nexport function createGalleryMarkup(images) {\n  return images.map(craeteImageMarkup).join('');\n};\n","// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getPhotos } from './js/pixabay-api.js';\nimport { createGalleryMarkup } from './js/render-functions.js';\n\nconst pageSize = 15;\n\nconst list = document.querySelector('.gallery');\nconst form = document.querySelector('.js-form');\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.btn-load-more');\nconst gallery = new SimpleLightbox('.gallery a');\n\nlet currentQuery = null;\nlet currentPage = 1;\nlet totalHits = 0;\n\nconst hideLoader = () => loader.classList.add('hidden');\nconst showLoader = () => loader.classList.remove('hidden');\n\nconst hideLoadMoreButton = () => loadMoreButton.classList.add('hidden');\nconst showLoadMoreButton = () => {\n  if (currentPage * pageSize < totalHits) {\n    loadMoreButton.classList.remove('hidden');\n  } else {\n    list.innerHTML += \"We're sorry, but you've reached the end of search results.\";\n  }\n};\n\nconst resetPagination = () => {\n  currentQuery = null;\n  currentPage = 1;\n  totalHits = 0;\n};\n\nconst onSubmit = (event) => {\n  event.preventDefault();\n\n  const searchQuery = event.currentTarget.elements.search.value.trim();\n  \n  showLoader();\n  hideLoadMoreButton();\n  resetPagination();\n\n  list.innerHTML = '';\n\n  getPhotos(searchQuery, currentPage, pageSize)\n    .then(res => {\n      if (res.hits.length === 0) {\n        return iziToast.error({\n          position: 'topRight',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n      }\n\n      list.innerHTML = createGalleryMarkup(res.hits);\n\n      currentQuery = searchQuery;\n      totalHits = res.totalHits;\n\n      gallery.refresh();\n      \n      showLoadMoreButton();\n    })\n    .catch(error => {\n      console.log(error);\n      \n      hideLoadMoreButton();\n    })\n    .finally(() => {\n      hideLoader();\n    });\n};\n\nconst loadMorePictures = () => {\n  if (!currentQuery) {\n    return;\n  }\n\n  showLoader();\n  hideLoadMoreButton();\n\n  currentPage += 1;\n\n  getPhotos(currentQuery, currentPage, pageSize)\n    .then(res => {\n      list.innerHTML += createGalleryMarkup(res.hits);\n\n      gallery.refresh();\n\n      const galeryItem = document.querySelector('.gallery-item');\n      const galeryItemSize = galeryItem.getBoundingClientRect();\n\n      window.scrollBy({\n        top: galeryItemSize.height * 2,\n        behavior: 'smooth',\n      });\n\n      showLoadMoreButton();\n    })\n    .catch(error => {\n      console.log(error);\n    })\n    .finally(() => {\n      hideLoader();\n    });\n};\n\nform.addEventListener('submit', onSubmit);\n\nloadMoreButton.addEventListener('click', loadMorePictures);\n"],"names":["getPhotos","query","page","pageSize","API_KEY","url","params","axios","error","craeteImageMarkup","image","createGalleryMarkup","images","list","form","loader","loadMoreButton","gallery","SimpleLightbox","currentQuery","currentPage","totalHits","hideLoader","showLoader","hideLoadMoreButton","showLoadMoreButton","resetPagination","onSubmit","event","searchQuery","res","iziToast","loadMorePictures","galeryItemSize"],"mappings":"+vBAEO,eAAeA,EAAUC,EAAOC,EAAMC,EAAU,CACrD,MAAMC,EAAU,qCACVC,EAAM,2BAYNC,EAAS,CACb,IAAKF,EACL,EAAGH,EACH,YAAa,aACb,WAAY,QACZ,WAAY,GACZ,KAAAC,EACA,SAAUC,CACd,EAEE,GAAI,CAIF,OAHiB,MAAMI,EAAM,IAAIF,EAAK,CACpC,OAAAC,CACN,CAAK,GACe,IACjB,OAAQE,EAAO,CACd,MAAM,IAAI,MAAMA,EAAM,SAAS,MAAM,CACtC,CACH,CClCA,MAAMC,EAAoBC,GACjB;AAAA,eACMA,EAAM,aAAa;AAAA,kBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI,YAAYA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAMhEA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,cAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,cAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,cAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,SAOtB,SAASC,EAAoBC,EAAQ,CAC1C,OAAOA,EAAO,IAAIH,CAAiB,EAAE,KAAK,EAAE,CAC9C,CCjBA,MAAMN,EAAW,GAEXU,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,gBAAgB,EACxDC,EAAU,IAAIC,EAAe,YAAY,EAE/C,IAAIC,EAAe,KACfC,EAAc,EACdC,EAAY,EAEhB,MAAMC,EAAa,IAAMP,EAAO,UAAU,IAAI,QAAQ,EAChDQ,EAAa,IAAMR,EAAO,UAAU,OAAO,QAAQ,EAEnDS,EAAqB,IAAMR,EAAe,UAAU,IAAI,QAAQ,EAChES,EAAqB,IAAM,CAC3BL,EAAcjB,EAAWkB,EAC3BL,EAAe,UAAU,OAAO,QAAQ,EAExCH,EAAK,WAAa,4DAEtB,EAEMa,EAAkB,IAAM,CAC5BP,EAAe,KACfC,EAAc,EACdC,EAAY,CACd,EAEMM,EAAYC,GAAU,CAC1BA,EAAM,eAAc,EAEpB,MAAMC,EAAcD,EAAM,cAAc,SAAS,OAAO,MAAM,OAE9DL,IACAC,IACAE,IAEAb,EAAK,UAAY,GAEjBb,EAAU6B,EAAaT,EAAajB,CAAQ,EACzC,KAAK2B,GAAO,CACX,GAAIA,EAAI,KAAK,SAAW,EACtB,OAAOC,EAAS,MAAM,CACpB,SAAU,WACV,QACE,0EACZ,CAAS,EAGHlB,EAAK,UAAYF,EAAoBmB,EAAI,IAAI,EAE7CX,EAAeU,EACfR,EAAYS,EAAI,UAEhBb,EAAQ,QAAO,EAEfQ,GACN,CAAK,EACA,MAAMjB,GAAS,CACd,QAAQ,IAAIA,CAAK,EAEjBgB,GACN,CAAK,EACA,QAAQ,IAAM,CACbF,GACN,CAAK,CACL,EAEMU,EAAmB,IAAM,CACxBb,IAILI,IACAC,IAEAJ,GAAe,EAEfpB,EAAUmB,EAAcC,EAAajB,CAAQ,EAC1C,KAAK2B,GAAO,CACXjB,EAAK,WAAaF,EAAoBmB,EAAI,IAAI,EAE9Cb,EAAQ,QAAO,EAGf,MAAMgB,EADa,SAAS,cAAc,eAAe,EACvB,wBAElC,OAAO,SAAS,CACd,IAAKA,EAAe,OAAS,EAC7B,SAAU,QAClB,CAAO,EAEDR,GACN,CAAK,EACA,MAAMjB,GAAS,CACd,QAAQ,IAAIA,CAAK,CACvB,CAAK,EACA,QAAQ,IAAM,CACbc,GACN,CAAK,EACL,EAEAR,EAAK,iBAAiB,SAAUa,CAAQ,EAExCX,EAAe,iBAAiB,QAASgB,CAAgB"}